<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Gennaio 2026 - MusicLeague</title>

  <style>
    :root{
      --bg:#0b0b10;
      --card:#141421cc;
      --border:#23233a;
      --text:#ffffff;
      --muted:#cfcfe6;
      --muted2:#a7a7c7;

      --btn:#2b2b45;
      --btnHover:#3a3a5e;

      --radius:22px;

      --gold:#B8860B;   /* oro pi√π ‚Äúoro‚Äù */
      --silver:#C0C0C0; /* argento */
      --bronze:#8B4513; /* bronzo pi√π scuro */
      --points:#ff4d5a; /* rosso punti */
    }

    *{ box-sizing:border-box; }

    body{
      margin:0;
      font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text",
                   "Segoe UI", Roboto, Arial, sans-serif;
      color:var(--text);
      background: var(--bg);
      min-height:100vh;
      overflow-x:hidden;
    }

    /* sfondo soft */
    .bg{
      position:fixed;
      inset:-40px;
      background:
        radial-gradient(900px 500px at 20% 15%, rgba(90,167,255,.22), transparent 60%),
        radial-gradient(900px 500px at 85% 10%, rgba(123,123,255,.22), transparent 55%),
        radial-gradient(900px 650px at 70% 75%, rgba(90,255,211,.10), transparent 60%),
        radial-gradient(900px 650px at 10% 80%, rgba(255,90,199,.08), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,.04), transparent 35%);
      filter: blur(18px);
      z-index:-2;
    }

    .wrap{
      max-width:980px;
      margin:0 auto;
      padding:40px 20px;
    }

    .card{
      background: var(--card);
      border: 1px solid rgba(255,255,255,.10);
      border-radius: var(--radius);
      padding: 18px;
      box-shadow:
        0 20px 60px rgba(0,0,0,.45),
        inset 0 1px 0 rgba(255,255,255,.08);
      backdrop-filter: blur(18px);
      margin-bottom: 14px;
    }

    a{ color:#9dd1ff; text-decoration:none; }
    a:hover{ text-decoration:underline; }

    .topNav{
      display:flex;
      gap:10px;
      align-items:center;
      color:var(--muted2);
      font-size:14px;
      margin-bottom:10px;
    }

    /* HERO con immagine mese */
    .hero{
  position:relative;
  overflow:hidden;
  border-radius: var(--radius);
  border: 1px solid rgba(255,255,255,.12);

  /* ‚úÖ altezza ‚Äúposter‚Äù (non schiacciata) */
  min-height: 320px;
  padding: 18px;

  background:
    linear-gradient(180deg, rgba(0,0,0,.25), rgba(0,0,0,.60)),
    url("assets/gennaio26.png");
  background-size: cover;
  background-position: center;

  box-shadow:
    0 20px 60px rgba(0,0,0,.45),
    inset 0 1px 0 rgba(255,255,255,.08);
}

.heroInner{
  /* ‚úÖ invece di ‚Äústare schiacciata‚Äù, la mettiamo centrata e con larghezza giusta */
  position:absolute;
  left: 18px;
  right: 18px;
  top: 50%;
  transform: translateY(-50%);

  max-width: 860px;
  margin: 0 auto;

  background: rgba(20,20,33,.62);
  border: 1px solid rgba(255,255,255,.10);
  border-radius: 18px;
  padding: 18px;
  backdrop-filter: blur(14px);
}

@media (max-width: 560px){
  .hero{ min-height: 360px; }
  .heroInner{
    top: 50%;
    transform: translateY(-50%);
    padding: 16px;
  }
}


    .heroTitleRow{
      display:flex;
      justify-content:center;
      align-items:center;
      gap:12px;
      text-align:center;
      margin-top:2px;
    }

    .heroIcon{
      width:44px;height:44px;
      border-radius:14px;
      display:grid;
      place-items:center;
      background: linear-gradient(135deg, rgba(90,167,255,.95), rgba(123,123,255,.95));
      box-shadow: 0 10px 28px rgba(0,0,0,.35);
      font-size:22px;
      flex:0 0 auto;
    }

    h1{
      margin:0;
      font-size:32px;
      letter-spacing:-.3px;
    }

    .heroSub{
      margin:10px 0 0 0;
      text-align:center;
      color: rgba(255,255,255,.78);
      font-size:14px;
    }

    /* Bottoni icona */
    .heroActions{
      display:flex;
      justify-content:center;
      gap:12px;
      flex-wrap:wrap;
      margin-top:14px;
    }

    .iconBtn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      height:46px;
      min-width: 210px;
      padding: 0 16px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.90);
      color:#0b0b10;
      font-weight:800;
      text-decoration:none;
      box-shadow: 0 10px 24px rgba(0,0,0,.35);
      transition: transform .12s ease, box-shadow .12s ease, filter .12s ease;
      -webkit-tap-highlight-color: transparent;
      user-select:none;
    }

    .iconBtn:hover{
      transform: translateY(-1px);
      box-shadow: 0 14px 30px rgba(0,0,0,.42);
      filter: brightness(1.03);
      text-decoration:none;
    }

    .iconBtn:active{
      transform: translateY(0px) scale(.99);
      box-shadow: 0 10px 22px rgba(0,0,0,.38);
    }

    .iconCircle{
      width:30px;height:30px;
      border-radius:10px;
      display:grid;
      place-items:center;
      background: rgba(0,0,0,.08);
      border: 1px solid rgba(0,0,0,.08);
      flex:0 0 auto;
    }

    .iconCircle svg{ width:18px; height:18px; display:block; }

    .iconBtn.spotify{
      background: linear-gradient(135deg, rgba(30,215,96,.95), rgba(25,180,80,.92));
      color:#07100a;
      border-color: rgba(255,255,255,.18);
    }
    .iconBtn.spotify .iconCircle{
      background: rgba(0,0,0,.12);
      border-color: rgba(0,0,0,.10);
    }

    .iconBtn.poll{
      background: linear-gradient(135deg, rgba(90,200,250,.95), rgba(123,123,255,.95));
      color:#fff;
      border-color: rgba(255,255,255,.14);
    }
    .iconBtn.poll .iconCircle{
      background: rgba(255,255,255,.14);
      border-color: rgba(255,255,255,.14);
    }

    /* Tabelle */
    .tableWrap{
      overflow-x:auto;
      border:1px solid var(--border);
      border-radius:12px;
    }

    table{
      width:100%;
      border-collapse:collapse;
      font-size:14px;
      min-width: 720px;
    }

    thead{
      background:#10101a;
    }

    th, td{
      padding:10px;
      text-align:left;
      border-top:1px solid #23233a;
      vertical-align:middle;
    }

    th{ border-top:0; }

    .hint{ color:var(--muted2); font-size:14px; }

    /* Badge Rank */
    .rankBadge{
      display:inline-block;
      padding:6px 10px;
      border-radius:10px;
      font-weight:900;
      min-width:40px;
      text-align:center;
    }

    .rankGold{ background: var(--gold); color:#111; }
    .rankSilver{ background: var(--silver); color:#111; }
    .rankBronze{ background: var(--bronze); color:#fff; }

    .points{
      color: var(--points);
      font-weight:900;
    }

    /* Overlay schermo intero (solo per Top 10) */
    .overlay{
      position:fixed; inset:0;
      background:rgba(0,0,0,.75);
      display:none;
      align-items:center;
      justify-content:center;
      padding:14px;
      z-index:9999;
    }
    .overlay.open{display:flex;}
    .overlay-card{
      width:min(1100px, 100%);
      height:min(90vh, 100%);
      background:#141421;
      border:1px solid #23233a;
      border-radius:16px;
      padding:14px;
      display:flex;
      flex-direction:column;
    }
    .overlay-header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      margin-bottom:10px;
    }
    .overlay-title{font-size:18px; font-weight:bold;}
    .overlay-body{
      flex:1;
      overflow:auto;
      border:1px solid #23233a;
      border-radius:12px;
    }

    .btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      height:40px;
      padding:0 14px;
      border-radius:12px;
      border:1px solid rgba(255,255,255,.12);
      background: #2b2b45;
      color:#fff;
      cursor:pointer;
      user-select:none;
    }
    .btn:hover{ background:#3a3a5e; }

    @media (max-width: 560px){
      h1{ font-size:28px; }
      .iconBtn{ min-width: 100%; }
      table{ min-width: 680px; }
    }
	<style>
/* HERO HEADER (titolo + bottoni a sinistra, immagine a destra) */
.headerHero{
  background: rgba(22, 22, 34, .62);
  border: 1px solid rgba(255,255,255,.10);
  border-radius: 22px;
  padding: 16px;
  box-shadow: 0 18px 60px rgba(0,0,0,.45), inset 0 1px 0 rgba(255,255,255,.08);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
}

/* --- HEADER: layout pi√π controllato --- */
.headerGrid{
  display:grid;
  grid-template-columns: 1fr auto;   /* sinistra fluida, destra ‚Äúa misura‚Äù */
  gap: 14px;
  align-items:center;               /* ‚úÖ allinea verticalmente */
}

/* la colonna immagine non deve ‚Äútirare su‚Äù l'altezza */
.headerRight{
  border-radius: 18px;
  overflow:hidden;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.18);

  width: 230px;                     /* ‚úÖ pi√π piccola */
  max-width: 40vw;                  /* non esplode su schermi piccoli */
  height: 170px;                    /* ‚úÖ altezza contenuta */
  max-height: 170px;                /* cap */
  justify-self:end;                 /* ‚úÖ a destra */
  align-self:center;                /* ‚úÖ centrata rispetto al testo */
}

.headerRight img{
  width:100%;
  height:100%;
  object-fit: cover;
  display:block;
  border-radius: 18px;
  filter: saturate(1.06) contrast(1.02);
}

/* mobile: immagine sotto e pi√π bassa */
@media (max-width: 720px){
  .headerGrid{ grid-template-columns: 1fr; }
  .headerRight{
    width: 100%;
    height: 150px;
    max-height: 150px;
    justify-self: stretch;
  }
}


.headerLeft{
  display:flex;
  flex-direction:column;
  justify-content:center;
  padding: 10px 10px 10px 12px;
  text-align:center;
}

.headerTitleRow{
  display:flex;
  align-items:center;
  justify-content:center;
  gap:12px;
  margin-bottom:8px;
}

.headerAppIcon{
  width:44px;height:44px;
  border-radius:14px;
  background: linear-gradient(135deg, rgba(90,200,250,.95), rgba(125,122,255,.95));
  display:grid;
  place-items:center;
  box-shadow: 0 10px 26px rgba(0,0,0,.35);
  flex:0 0 auto;
}
.headerAppIcon span{ font-size:20px; }

.headerTitle{
  margin:0;
  font-size: 30px;
  letter-spacing:-0.4px;
}

.headerSub{
  margin:0 0 12px 0;
  color: rgba(255,255,255,.72);
  font-size: 14px;
}

.headerActions{
  display:flex;
  justify-content:center;
  gap:12px;
  flex-wrap:wrap;
}

/* bottoni icona (spotify / form) */
.iconBtn{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:10px;
  height: 46px;
  padding: 0 16px;
  border-radius: 16px;
  border: 1px solid rgba(255,255,255,.14);
  text-decoration:none;
  font-weight: 800;
  font-size: 14px;
  box-shadow: 0 10px 24px rgba(0,0,0,.35);
  transition: transform .12s ease, filter .12s ease;
  user-select:none;
  -webkit-tap-highlight-color: transparent;
}
.iconBtn:hover{ transform: translateY(-1px); filter: brightness(1.04); }
.iconBtn:active{ transform: translateY(0) scale(.99); }

.iconBtn-spotify{
  background: linear-gradient(135deg, rgba(30,215,96,.95), rgba(19,170,79,.95));
  color:#0b0b10;
}
.iconBtn-form{
  background: linear-gradient(135deg, rgba(90,200,250,.95), rgba(125,122,255,.95));
  color:#fff;
}

.iconCircle{
  width:30px;height:30px;
  border-radius: 999px;
  background: rgba(0,0,0,.22);
  display:grid;
  place-items:center;
  font-size:16px;
}

/* immagine a destra */
.headerRight{
  border-radius: 18px;
  overflow:hidden;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.18);
  min-height: 190px;          /* ‚úÖ evita ‚Äúschiacciata‚Äù */
}

.headerRight img{
  width:100%;
  height:100%;
  object-fit: cover;
  display:block;
  filter: saturate(1.06) contrast(1.02);
}

/* responsive */
@media (max-width: 720px){
  .headerGrid{ grid-template-columns: 1fr; }
  .headerRight{ min-height: 160px; }
}
.navPills{
  display:flex;
  gap:10px;
  align-items:center;
  justify-content:flex-start;
  margin:0 0 12px 0;
  flex-wrap:wrap;
}

.navPill{
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding:10px 12px;
  border-radius:999px;
  text-decoration:none;
  font-size:13px;
  font-weight:700;
  color: rgba(255,255,255,.86);

  background: rgba(255,255,255,.06);
  border: 1px solid rgba(255,255,255,.12);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.08);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);

  transition: transform .12s ease, background .12s ease, border-color .12s ease;
}

.navPill:hover{
  transform: translateY(-1px);
  background: rgba(255,255,255,.09);
  border-color: rgba(255,255,255,.18);
  text-decoration:none;
}
.navPill:active{ transform: translateY(0) scale(.99); }
.headerCard{
  padding:18px;
}

.headerGrid{
  display:grid;
  grid-template-columns: 1fr auto;
  gap: 14px;
  align-items:center;
}

.headerRight{
  border-radius: 18px;
  overflow:hidden;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.18);
  width: 230px;
  max-width: 40vw;
  height: 170px;
  max-height: 170px;
  justify-self:end;
}

.headerRight img{
  width:100%;
  height:100%;
  object-fit: cover;
  display:block;
  border-radius:18px;
}

.actions{
  display:flex;
  gap:12px;
  flex-wrap:wrap;
  justify-content:center;
}

.btn{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:10px;
  height:46px;
  padding:0 16px;
  border-radius:14px;
  text-decoration:none;
  font-weight:800;
  border:1px solid rgba(255,255,255,.12);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.08);
}

.btnIcon{
  width:22px;
  height:22px;
  display:grid;
  place-items:center;
  border-radius:10px;
  background: rgba(0,0,0,.18);
  border:1px solid rgba(255,255,255,.10);
}

.btn-spotify{
  background: linear-gradient(135deg, rgba(30,215,96,.95), rgba(20,180,80,.90));
  color:#05110a;
}
.btn-spotify .btnIcon{
  background: rgba(0,0,0,.12);
  border-color: rgba(0,0,0,.18);
  color:#05110a; /* svg eredita currentColor */
}

.btn-form{
  background: linear-gradient(135deg, rgba(90,200,250,.95), rgba(125,122,255,.95));
  color:#fff;
}

/* nav pills (se gi√† presenti, ok) */
.navPills{
  display:flex;
  gap:10px;
  align-items:center;
  justify-content:flex-start;
  margin:0 0 12px 0;
  flex-wrap:wrap;
}

.navPill{
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding:10px 12px;
  border-radius:999px;
  text-decoration:none;
  font-size:13px;
  font-weight:700;
  color: rgba(255,255,255,.86);
  background: rgba(255,255,255,.06);
  border: 1px solid rgba(255,255,255,.12);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.08);
  backdrop-filter: blur(12px);
}

@media (max-width: 720px){
  .headerGrid{ grid-template-columns: 1fr; }
  .headerRight{
    width:100%;
    max-width:100%;
    height:150px;
    max-height:150px;
  }
}
/* quando clono la tabella nel fullscreen */
.fullscreenMode table{
  width: 100%;
  table-layout: auto;         /* ‚úÖ colonne si adattano al contenuto */
}

.fullscreenMode th,
.fullscreenMode td{
  white-space: normal;        /* ‚úÖ pu√≤ andare a capo */
  word-break: break-word;
}

/* in overlay: font/padding pi√π ‚Äúmobile-friendly‚Äù */
.overlay .fullscreenMode table{
  font-size: 13px;
}
.overlay .fullscreenMode th,
.overlay .fullscreenMode td{
  padding: 8px 10px !important;
}

/* ancora pi√π compatto su schermi piccoli */
@media (max-width: 520px){
  .overlay .fullscreenMode table{
    font-size: 12px;
  }
  .overlay .fullscreenMode th,
  .overlay .fullscreenMode td{
    padding: 7px 8px !important;
  }
}

</style>

  </style>
</head>

<body>
  <div class="bg"></div>

<div class="wrap">

  <!-- HEADER: titolo + bottoni + immagine dentro stessa card -->
  <div class="card headerHero">

    <div class="navPills">
      <a class="navPill" href="months.html">‚Üê Torna ai Mesi</a>
      <a class="navPill" href="index.html">üè† Home</a>
    </div>

    <div class="headerGrid">

      <!-- SINISTRA: titolo + bottoni -->
      <div class="headerLeft">
        <div class="headerTitleRow">
          <div class="headerAppIcon"><span>üóìÔ∏è</span></div>
          <h1 class="headerTitle">Gennaio 2026</h1>
        </div>

        <p class="headerSub">Playlist ‚Ä¢ sondaggio ‚Ä¢ risultati del mese</p>

        <div class="headerActions">
          <!-- Spotify -->
          <a class="iconBtn iconBtn-spotify" id="playlistBtn" target="_blank" rel="noopener">
            <span class="iconCircle">üéµ</span>
            Apri playlist
          </a>

          <!-- Form -->
          <a class="iconBtn iconBtn-form" id="formBtn" target="_blank" rel="noopener">
            <span class="iconCircle">üó≥Ô∏è</span>
            Apri sondaggio
          </a>
        </div>
      </div>

      <!-- DESTRA: immagine -->
      <div class="headerRight">
        <img src="assets/gennaio26.png" alt="Gennaio 2026" />
      </div>

    </div>
  </div>

  <!-- TOP 10 -->
  <div class="card">
    <h2 style="margin-top:0">üèÜ Top 10</h2>
    <div style="display:flex; gap:10px; flex-wrap:wrap; margin:10px 0 12px 0;">
      <button class="btn" id="fullscreenBtn" type="button">üîç Schermo intero</button>
    </div>

    <div id="top10Wrap" class="tableWrap">
      <table id="top10Table">
        <thead>
          <tr>
            <th>Rank</th>
            <th>Titolo</th>
            <th>Artista/Band</th>
            <th>Media</th>
            <th>Punti</th>
            <th>Proponente</th>
          </tr>
        </thead>
        <tbody id="top10Body"></tbody>
      </table>
    </div>

    <p id="top10Status" class="hint" style="margin-top:10px;"></p>
  </div>

  <!-- CLASSIFICA MEDIA VOTI -->
  <div class="card">
    <h2 style="margin-top:0">üìä Classifica Media Voti</h2>
	<div style="display:flex; gap:10px; flex-wrap:wrap; margin:10px 0 12px 0;">
  <button class="btn" id="avgFullscreenBtn" type="button">üîç Schermo intero</button>
</div>

    <div id="avgWrap" class="tableWrap">
      <table id="avgTable">
        <thead>
          <tr>
            <th>Rank</th>
            <th>Media</th>
            <th>Proponente</th>
            <th>Punti</th>
          </tr>
        </thead>
        <tbody id="avgBody"></tbody>
      </table>
    </div>

    <p id="avgStatus" class="hint" style="margin-top:10px;"></p>
  </div>

</div>

<!-- Overlay full-screen per Top 10 -->
<div class="overlay" id="top10Overlay" aria-hidden="true">
  <div class="overlay-card">
    <div class="overlay-header">
      <div class="overlay-title">üèÜ Top 10 ‚Äî Schermo intero</div>
      <button class="btn" id="closeOverlayBtn" type="button">‚úñ Chiudi</button>
    </div>
    <div class="overlay-body" id="overlayBody"></div>
  </div>
</div>


  <script>
  // === LINK (metti i tuoi) ===
  const PLAYLIST_LINK = "https://open.spotify.com/playlist/2BYzKSx4yyiBh8xts52cYE?si=PvAAK1LmRm6tzIeDqyQtPw&pi=ut_-EcNERZGQG";
  const FORM_LINK     = "https://forms.office.com/e/ukbeHJ3CHb";

  document.getElementById("playlistBtn").href = PLAYLIST_LINK;
  document.getElementById("formBtn").href = FORM_LINK;

  // === HELPERS ===
  function escapeHtml(s) {
    return (s ?? "").toString().replace(/[&<>"']/g, m =>
      ({ "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;" }[m])
    );
  }

  // parser robusto: prova ; poi TAB poi ,
  function splitLine(line) {
    if (line.includes(";")) return line.split(";");
    if (line.includes("\t")) return line.split("\t");
    return line.split(",");
  }

  function rankBadgeHtml(rankText) {
    const r = (rankText ?? "").toString().trim();
    const n = parseInt(r, 10);

    let cls = "rankBadge";
    if (n === 1) cls += " rankGold";
    else if (n === 2) cls += " rankSilver";
    else if (n === 3) cls += " rankBronze";

    return `<span class="${cls}">${escapeHtml(r)}</span>`;
  }

  // Ricava YYYY-MM dal nome della pagina: month-2026-01.html
  function getMonthFolderFromPage() {
    const file = (location.pathname.split("/").pop() || "").toLowerCase();
    const m = file.match(/(\d{4})-(\d{2})/);
    if (m) return `${m[1]}-${m[2]}`;
    // fallback se non trova: metti qui quello che vuoi
    return "2026-01";
  }

  const MONTH_FOLDER = getMonthFolderFromPage();

  async function fetchCsvText(filename) {
  const url = `data/${MONTH_FOLDER}/${filename}`; // ‚úÖ relativo (GitHub Pages safe)
  const res = await fetch(url, { cache: "no-store" });
  if (!res.ok) throw new Error(`CSV non trovato: ${url} (HTTP ${res.status})`);
  return await res.text();
}



  // === TOP 10 ===
  async function loadTop10() {
    const body = document.getElementById("top10Body");
    const status = document.getElementById("top10Status");

    try {
      const text = await fetchCsvText("top10.csv");
      const lines = text.split(/\r?\n/).filter(l => l.trim() !== "");
      const rows = lines.slice(1).map(splitLine);

      body.innerHTML = rows.map(cols => {
        const rank = cols[0];
        return `
          <tr>
            <td>${rankBadgeHtml(rank)}</td>
            <td>${escapeHtml(cols[1])}</td>
            <td style="color:var(--muted);">${escapeHtml(cols[2])}</td>
            <td>${escapeHtml(cols[3])}</td>
            <td class="points">${escapeHtml(cols[4])}</td>
            <td style="color:var(--muted);">${escapeHtml(cols[5])}</td>
          </tr>
        `;
      }).join("");

      status.textContent = "";
    } catch (e) {
      console.error(e);
      status.textContent = ""; // non mostrare nulla
    }
  }

  // === CLASSIFICA MEDIA VOTI ===
  async function loadAvg() {
    const body = document.getElementById("avgBody");
    const status = document.getElementById("avgStatus");

    try {
      // IMPORTANTISSIMO: metti qui il nome esatto del tuo file
      // (dallo screen mi pare: "classificautentemediapunti.csv")
      const text = await fetchCsvText("classificautentemediapunti.csv");

      const lines = text.split(/\r?\n/).filter(l => l.trim() !== "");
      const rows = lines.slice(1).map(splitLine);

      body.innerHTML = rows.map(cols => {
        const rank = cols[0];
        return `
          <tr>
            <td>${rankBadgeHtml(rank)}</td>
            <td>${escapeHtml(cols[1])}</td>
            <td>${escapeHtml(cols[2])}</td>
            <td class="points">${escapeHtml(cols[3])}</td>
          </tr>
        `;
      }).join("");

      status.textContent = "";
    } catch (e) {
      console.error(e);
      status.textContent = ""; // non mostrare nulla
    }
  }

  loadTop10();
  loadAvg();

  // Fullscreen overlay (riutilizzabile per pi√π tabelle)
  const overlay = document.getElementById("top10Overlay");
  const closeOverlayBtn = document.getElementById("closeOverlayBtn");
  const overlayBody = document.getElementById("overlayBody");
  const overlayTitle = document.querySelector(".overlay-title");

  function openOverlayFor(wrapperEl, titleText) {
    overlayBody.innerHTML = "";

    // clone del blocco tabella
    const clone = wrapperEl.cloneNode(true);

    // ‚úÖ classe che useremo per ‚Äúauto-fit‚Äù colonne in overlay
    clone.classList.add("fullscreenMode");

    // ripuliamo bordi/overflow del wrapper
    clone.style.overflow = "visible";
    clone.style.border = "0";
    clone.style.borderRadius = "0";

    overlayBody.appendChild(clone);

    // titolo overlay dinamico
    if (overlayTitle) overlayTitle.textContent = titleText;

    overlay.classList.add("open");
    overlay.setAttribute("aria-hidden", "false");
    document.body.style.overflow = "hidden";
  }

  function closeOverlay() {
    overlay.classList.remove("open");
    overlay.setAttribute("aria-hidden", "true");
    document.body.style.overflow = "";
  }

  closeOverlayBtn.addEventListener("click", closeOverlay);
  overlay.addEventListener("click", (e) => {
    if (e.target === overlay) closeOverlay();
  });

  // --- Top10 button ---
  const fullscreenBtn = document.getElementById("fullscreenBtn");
  const top10Wrap = document.getElementById("top10Wrap");

  fullscreenBtn.addEventListener("click", () => {
    openOverlayFor(top10Wrap, "üèÜ Top 10 ‚Äî Schermo intero");
  });

  // --- Avg button ---
  const avgFullscreenBtn = document.getElementById("avgFullscreenBtn");
  const avgWrap = document.getElementById("avgWrap");

  avgFullscreenBtn.addEventListener("click", () => {
    openOverlayFor(avgWrap, "üìä Classifica Media Voti ‚Äî Schermo intero");
  });
</script>


</body>
</html>
